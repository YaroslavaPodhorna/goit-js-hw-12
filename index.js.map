{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '48208907-81157ac097d3685843fe42362';\n\n/**\n * Функція для виконання запитів до Pixabay API\n * @param {string} query - Пошуковий запит\n * @param {number} page - Номер сторінки\n * @param {number} perPage - Кількість зображень на сторінку\n * @returns {Promise} - Результати пошуку\n */\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n  \n  const { data } = await axios.get(url);\n  \n  if (data.hits.length === 0) {\n    throw new Error('No images found');\n  }\n  \n  return data;\n}","export function renderGallery(images) {\n  return images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <a class=\"gallery-item\" href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n          <div class=\"info\">\n            <p><span>Likes</span><span>${likes}</span></p>\n            <p><span>Views</span><span>${views}</span></p>\n            <p><span>Comments</span><span>${comments}</span></p>\n            <p><span>Downloads</span><span>${downloads}</span></p>\n          </div>\n        </a>`\n    )\n    .join('');\n}","import { fetchImages } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\n// DOM елементи\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.createElement('button');\n\nloadMoreBtn.textContent = 'Load More';\nloadMoreBtn.classList.add('load-more-btn', 'is-hidden');\ngallery.insertAdjacentElement('afterend', loadMoreBtn);\n\nlet lightbox = new SimpleLightbox('.gallery a');\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\nlet loadedImages = 0;\nconst perPage = 15;\n\n// Очистка галереї\nfunction clearGallery() {\n  gallery.innerHTML = '';\n  loadedImages = 0;\n}\n\n// Показати/сховати кнопку \"Load More\"\nfunction toggleLoadMoreBtn(show) {\n  loadMoreBtn.classList.toggle('is-hidden', !show);\n}\n\n// Показати/сховати лоадер\nfunction toggleLoader(show) {\n  loader.style.display = show ? 'block' : 'none';\n}\n\n// Сабміт форми\nform.addEventListener('submit', async (e) => {\n  e.preventDefault();\n  query = e.target.elements.searchQuery.value.trim();\n\n  if (!query) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Enter a search term!',\n      position: 'topRight',\n      timeout: 3000,\n    });\n    return;\n  }\n\n  page = 1;\n  clearGallery();\n  toggleLoadMoreBtn(false);\n  toggleLoader(true); // Показати лоадер\n\n  try {\n    const { hits, totalHits: newTotalHits } = await fetchImages(query, page, perPage);\n    totalHits = newTotalHits;\n    toggleLoader(false); // Приховати лоадер після завантаження\n\n    if (totalHits === 0) {\n      iziToast.info({\n        title: 'Info',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        timeout: 3000,\n        class: 'custom-toast',\n      });\n      return;\n    }\n\n    gallery.insertAdjacentHTML('beforeend', renderGallery(hits));\n    lightbox.refresh();\n\n    loadedImages = hits.length;\n\n    iziToast.success({\n      title: 'Success',\n      message: `Found ${newTotalHits} images!`,\n      position: 'topRight',\n      timeout: 3000,\n    });\n\n    toggleLoadMoreBtn(loadedImages < totalHits);\n  } catch (error) {\n    toggleLoader(false); // Приховати лоадер у разі помилки\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong!',\n      position: 'topRight',\n      timeout: 3000,\n    });\n  }\n});\n\n// Клік на кнопку \"Load More\"\nloadMoreBtn.addEventListener('click', async () => {\n  page += 1;\n  toggleLoader(true); // Показати лоадер\n\n  try {\n    const { hits } = await fetchImages(query, page, perPage);\n    toggleLoader(false); // Приховати лоадер після завантаження\n    gallery.insertAdjacentHTML('beforeend', renderGallery(hits));\n    lightbox.refresh();\n\n    loadedImages += hits.length;\n\n    // Плавне прокручування\n    const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (loadedImages >= totalHits) {\n      toggleLoadMoreBtn(false);\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        timeout: 3000,\n      });\n    }\n  } catch (error) {\n    toggleLoader(false); // Приховати лоадер у разі помилки\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to load more images!',\n      position: 'topRight',\n      timeout: 3000,\n    });\n  }\n});\n"],"names":["BASE_URL","API_KEY","fetchImages","query","page","perPage","url","data","axios","renderGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","gallery","loader","loadMoreBtn","lightbox","SimpleLightbox","totalHits","loadedImages","clearGallery","toggleLoadMoreBtn","show","toggleLoader","e","iziToast","hits","newTotalHits","cardHeight"],"mappings":"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"}